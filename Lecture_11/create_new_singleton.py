# –°–æ–∑–¥–∞–Ω–∏–µ __init__, __new__, –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã—Ö –∫–ª–∞—Å—Å–æ–≤, –®–∞–±–ª–æ–Ω –û–¥–∏–Ω–æ—á–∫–∞, Singleton

# -------------------------------------------------------------------------------------------------
# STEP 1. –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞, __init__
# –í –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ name —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º, –∞ equipment - –Ω–µ
# –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω. –ü—Ä–∏ —ç—Ç–æ–º –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–∞–∫ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω–æ, —Ç–∞–∫ –∏ –ø–æ –∫–ª—é—á—É.
# –í —ç—Ç–æ–º –ø–ª–∞–Ω–µ –º–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –æ–±—ã—á–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º.
# –í—ã–≤–æ–¥ –Ω–∞ –ø–µ—á–∞—Ç—å –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–¥–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π. –ü–æ–∫–∞ –Ω–µ
# –æ—Ç—Ä–∞–±–æ—Ç–∞–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞, –¥–∞–ª—å—à–µ –∫–æ–¥ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è.

# class User:
#     def __init__(self, name: str, equipment: list = None):
#         self.name = name
#         self.equipment = equipment if equipment is not None else []
#         self.life = 3
#         # –ø—Ä–∏–Ω—Ç–∏–º —Ç–æ–ª—å–∫–æ –≤ —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª—è—Ö, –∞ –Ω–µ –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á
#         print(f'–°–æ–∑–¥–∞–ª {self} —Å–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏: {self.name=},\t{self.equipment=},\t{self.life=}')
#
#
# print('–°–æ–∑–¥–∞—ë–º –ø–µ—Ä–≤—ã–π —Ä–∞–∑')
# u_1 = User('–°–ø–µ–Ω–≥–ª–µ—Ä')
# print('–°–æ–∑–¥–∞—ë–º –≤—Ç–æ—Ä–æ–π —Ä–∞–∑')
# u_2 = User('–í–µ–Ω–∫–º–∞–Ω', ['–ø—Ä–æ—Ç–æ–Ω–Ω—ã–π —É—Å–∫–æ—Ä–∏—Ç–µ–ª—å', '–ª–æ–≤—É—à–∫–∞'])
# print('–°–æ–∑–¥–∞—ë–º —Ç—Ä–µ—Ç–∏–π —Ä–∞–∑')
# u_3 = User(equipment=['–ª–æ–≤—É—à–∫–∞', '–ø—Ä–∏–±–æ—Ä –Ω–æ—á–Ω–æ–≥–æ –≤–∏–¥–µ–Ω–∏—è'], name='–°—Ç—ç–Ω—Ü')

# => –°–æ–∑–¥–∞—ë–º –ø–µ—Ä–≤—ã–π —Ä–∞–∑
# => –°–æ–∑–¥–∞–ª <__main__.User object at 0x0000020309A95D90> —Å–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏: self.name='–°–ø–µ–Ω–≥–ª–µ—Ä',
#       self.equipment=[],	self.life=3
# => –°–æ–∑–¥–∞—ë–º –≤—Ç–æ—Ä–æ–π —Ä–∞–∑
# => –°–æ–∑–¥–∞–ª <__main__.User object at 0x0000020309A95DC0> —Å–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏: self.name='–í–µ–Ω–∫–º–∞–Ω',
#       self.equipment=['–ø—Ä–æ—Ç–æ–Ω–Ω—ã–π —É—Å–∫–æ—Ä–∏—Ç–µ–ª—å', '–ª–æ–≤—É—à–∫–∞'],	self.life=3
# => –°–æ–∑–¥–∞—ë–º —Ç—Ä–µ—Ç–∏–π —Ä–∞–∑
# => –°–æ–∑–¥–∞–ª <__main__.User object at 0x0000020309A95DF0> —Å–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏: self.name='–°—Ç—ç–Ω—Ü',
#       self.equipment=['–ª–æ–≤—É—à–∫–∞', '–ø—Ä–∏–±–æ—Ä –Ω–æ—á–Ω–æ–≥–æ –≤–∏–¥–µ–Ω–∏—è'],	self.life=3


# ---------------------------------------------------------------------------------------------------
# STEP 2. –ö–æ–Ω—Ç—Ä–æ–ª—å —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞—Å—Å–∞ —á–µ—Ä–µ–∑ __new__
# –ú–µ—Ç–æ–¥ __new__ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞–Ω—å—à–µ __init__ –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —á—Ç–æ –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å
# –∫–ª–∞—Å—Å –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å–µ–±—è - –∫–ª–∞—Å—Å–∞. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤–Ω–∞—á–∞–ª–µ –æ–±—â–∏–π –ø—Ä–∏–º–µ—Ä.
# –ú–µ—Ç–æ–¥ __new__ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–µ—Ä–≤–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Å–∞–º —Å–µ–±—è. –û–±—ã—á–Ω–æ
# –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–ª–æ–≤–æ cls ‚Äî —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –æ—Ç class. –¢–∞–∫ –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å
# –∫–ª–∞—Å—Å–æ–º, –∞ –Ω–µ —Å –µ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã *args, **kwargs –Ω—É–∂–Ω—ã –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π
# —Ä–∞–±–æ—Ç—ã –º–µ—Ç–æ–¥–∞ __init__ –∏ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –Ω–µ–≥–æ –ª—é–±—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤.
# –í–Ω—É—Ç—Ä–∏ __new__ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–∑–≤–∞—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –º–µ—Ç–æ–¥. –û–Ω
# –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–∂–¥–µ —á–µ–º –≤–µ—Ä–Ω—É—Ç—å –∏–∑ –º–µ—Ç–æ–¥–∞.

# class User:
#     def __init__(self, name: str):
#         self.name = name
#         print(f'–°–æ–∑–¥–∞–ª {self.name=}')
#
#     def __new__(cls, *args, **kwargs):
#         instance = super().__new__(cls)
#         print(f'–°–æ–∑–¥–∞–ª –∫–ª–∞—Å—Å {cls}')
#         return instance
#
#
# print('–°–æ–∑–¥–∞—ë–º –ø–µ—Ä–≤—ã–π —Ä–∞–∑')
# u_1 = User('–°–ø–µ–Ω–≥–ª–µ—Ä')
# print('–°–æ–∑–¥–∞—ë–º –≤—Ç–æ—Ä–æ–π —Ä–∞–∑')
# u_2 = User('–í–µ–Ω–∫–º–∞–Ω')
# print('–°–æ–∑–¥–∞—ë–º —Ç—Ä–µ—Ç–∏–π —Ä–∞–∑')
# u_3 = User(name='–°—Ç—ç–Ω—Ü')

# => –°–æ–∑–¥–∞—ë–º –ø–µ—Ä–≤—ã–π —Ä–∞–∑
# => –°–æ–∑–¥–∞–ª –∫–ª–∞—Å—Å <class '__main__.User'>
# => –°–æ–∑–¥–∞–ª self.name='–°–ø–µ–Ω–≥–ª–µ—Ä'
# => –°–æ–∑–¥–∞—ë–º –≤—Ç–æ—Ä–æ–π —Ä–∞–∑
# => –°–æ–∑–¥–∞–ª –∫–ª–∞—Å—Å <class '__main__.User'>
# => –°–æ–∑–¥–∞–ª self.name='–í–µ–Ω–∫–º–∞–Ω'
# => –°–æ–∑–¥–∞—ë–º —Ç—Ä–µ—Ç–∏–π —Ä–∞–∑
# => –°–æ–∑–¥–∞–ª –∫–ª–∞—Å—Å <class '__main__.User'>
# => –°–æ–∑–¥–∞–ª self.name='–°—Ç—ç–Ω—Ü'


# -------------------------------------------------------------------------------
# STEP 3. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã—Ö –∫–ª–∞—Å—Å–æ–≤
# –û–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–¥–µ—Ä __new__ ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
# —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —É–∂–µ –∏–º–µ—é—â–∏—Ö—Å—è –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã—Ö –∫–ª–∞—Å—Å–æ–≤ Python. –ù–∞–ø—Ä–∏–º–µ—Ä –º—ã
# —Ö–æ—Ç–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Ü–µ–ª–æ–≥–æ —Ç–∏–ø–∞, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Ö—Ä–∞–Ω–∏—Ç –ø—Ä–∏—Å–≤–æ–µ–Ω–Ω–æ–µ —á–∏—Å–ª—É –∏–º—è.
# –ü–∞—Ä–∞–º–µ—Ç—Ä value –Ω—É–∂–µ–Ω –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–ª–∞—Å—Å int. –î–∞–ª–µ–µ –∫
# —Ü–µ–ª–æ–º—É —á–∏—Å–ª—É –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä name —Å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º. –ü–æ—Å–ª–µ
# —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –¥–ª—è –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π.
# –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –Ω–∞—à –∫–ª–∞—Å—Å —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞–ª –≤—Å—ë, —á—Ç–æ —É–º–µ–µ—Ç –∫–ª–∞—Å—Å int. –ú—ã —Å–º–æ–≥–ª–∏
# —Å–ª–æ–∂–∏—Ç—å –¥–≤–∞ —á–∏—Å–ª–∞ –∏ –ø–æ–ª—É—á–∏—Ç—å –æ–±—ã—á–Ω–æ–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –±–µ–∑ —Å–≤–æ–π—Å—Ç–≤–∞ name

# class NamedInt(int):
#     def __new__(cls, value, name):
#         instance = super().__new__(cls, value)
#         instance.name = name
#         print(f'–°–æ–∑–¥–∞–ª –∫–ª–∞—Å—Å {cls}')
#         return instance
#
#
# print('–°–æ–∑–¥–∞—ë–º –ø–µ—Ä–≤—ã–π —Ä–∞–∑')
# a = NamedInt(42, '–ì–ª–∞–≤–Ω—ã–π –æ—Ç–≤–µ—Ç –∂–∏–∑–Ω–∏, –í—Å–µ–ª–µ–Ω–Ω–æ–π –∏ –≤–æ–æ–±—â–µ')
# print('–°–æ–∑–¥–∞—ë–º –≤—Ç–æ—Ä–æ–π —Ä–∞–∑')
# b = NamedInt(73, '–õ—É—á—à–µ–µ –ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–æ')
# print(f'{a=}\t{a.name=}\t{type(a)=}')
# print(f'{b=}\t{b.name=}\t{type(b)=}')
# c = a + b
# print(f'{c=}\t{type(c)=}')

# => –°–æ–∑–¥–∞—ë–º –ø–µ—Ä–≤—ã–π —Ä–∞–∑
# => –°–æ–∑–¥–∞–ª –∫–ª–∞—Å—Å <class '__main__.NamedInt'>
# => –°–æ–∑–¥–∞—ë–º –≤—Ç–æ—Ä–æ–π —Ä–∞–∑
# => –°–æ–∑–¥–∞–ª –∫–ª–∞—Å—Å <class '__main__.NamedInt'>
# => a=42	a.name='–ì–ª–∞–≤–Ω—ã–π –æ—Ç–≤–µ—Ç –∂–∏–∑–Ω–∏, –í—Å–µ–ª–µ–Ω–Ω–æ–π –∏ –≤–æ–æ–±—â–µ'	type(a)=<class '__main__.NamedInt'>
# => b=73	b.name='–õ—É—á—à–µ–µ –ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–æ'	type(b)=<class '__main__.NamedInt'>
# => c=115	type(c)=<class 'int'>


# ------------------------------------------------------------------------------------
# STEP 4. –®–∞–±–ª–æ–Ω –û–¥–∏–Ω–æ—á–∫–∞, Singleton
# –ï—â—ë –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–¥—Ä–µ __new__ ‚Äî –ø–∞—Ç—Ç–µ—Ä–Ω Singleton. –û–Ω
# –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ª–∏—à—å –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞. –í—Ç–æ—Ä–∞—è –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ø—ã—Ç–∫–∏
# –±—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä.
# üî• –í–Ω–∏–º–∞–Ω–∏–µ! –≠—Ç–æ –Ω–µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –û–¥–∏–Ω–æ—á–∫–∞ –≤
# Python, –∞ –≤–µ—Ä—Å–∏—è —á–µ—Ä–µ–∑ __new__
# –ó–∞—â–∏—â–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è _instance —Ö—Ä–∞–Ω–∏—Ç None –∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–µ—Ä–≤–æ–≥–æ
# —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞ –Ω–µ–≥–æ —Å—Å—ã–ª–∫—É. –ë–ª–∞–≥–æ–¥–∞—Ä—è *args, **kwargs –≤ –º–µ—Ç–æ–¥–µ __new__
# –∞—Ä–≥—É–º–µ–Ω—Ç ‚Äú–ü–µ—Ä–≤—ã–π‚Äù –ø—Ä–æ–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è –≤ –º–µ—Ç–æ–¥ __init__ –∏ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä name.
# –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –≤—Ç–æ—Ä–æ–π —Ä–∞–∑ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –µ–≥–æ –ø–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è –∏ —É –Ω–µ—ë
# –∑–∞–º–µ–Ω—è–µ—Ç—Å—è —Å–≤–æ–π—Å—Ç–≤–æ name. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ a –∏ b —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–ª–∞—Å—Å, –∞
# —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∏—Ö —Å–≤–æ–π—Å—Ç–≤–æ name –æ–±—â–µ–µ

# class Singleton:
#     _instance = None
#
#     def __new__(cls, *args, **kwargs):
#         if cls._instance is None:
#             cls._instance = super().__new__(cls)
#         return cls._instance
#
#     def __init__(self, name: str):
#         self.name = name
#
#
# a = Singleton('–ü–µ—Ä–≤—ã–π')
# print(f'{a.name=}')         # a.name = '–ü–µ—Ä–≤—ã–π'
# b = Singleton('–í—Ç–æ—Ä–æ–π')
# print(f'{a is b=}')         # a is b = True
# print(f'{a.name=}\n{b.name=}')  # a.name = '–í—Ç–æ—Ä–æ–π'   b.name = '–í—Ç–æ—Ä–æ–π'


# ----------------------------------------------------------------------------------
# –°–æ–∑–¥–∞–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ 3 —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞
class Count:
    _count = 0
    _last = None

    def __new__(cls, *args, **kwargs):
        if cls._count < 3:
            cls._last = super().__new__(cls)
            cls._count += 1
        return cls._last

    def __init__(self, name: str):
        self.name = name


u_1 = Count('–°–ø–µ–Ω–≥–ª–µ—Ä')
u_2 = (Count('–í–µ–Ω–∫–º–∞–Ω'))
u_3 = (Count('–ü–µ—Ç—Ä'))
u_4 = (Count('–ò–≤–∞–Ω'))
print(f'{u_1.name=}\n{u_2.name=}\n{u_3.name=}\n{u_4.name=}')